@model Reporting_Assistant_New.ViewModel.TaskDone
@{
    ViewBag.Title = "Issues";
    Layout = "~/Views/Shared/_LayoutPageGeneral.cshtml";
}


<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="~/Scripts/DataTables/js/dataTables.bootstrap4.min.js"></script>
<link href="~/Scripts/DataTables/css/dataTables.bootstrap4.css" rel="stylesheet" />
<script src="~/Scripts/jquery-1.10.2.min.js"></script>

<style>
    .collapsible {
        background-color: #777;
        color: white;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
    }

        .active, .collapsible:hover {
            background-color: #555;
        }

    .content {
        padding: 0 18px;
        display: none;
        overflow: hidden;
        background-color: #f1f1f1;
    }
</style>
<h2>Issues</h2>

@using (Html.BeginForm("Insertd_data", "MyIssues", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
<button type="button" class="collapsible">@DateTime.Now.AddDays(-1).DayOfWeek,@DateTime.Now.AddDays(-1).ToString("dd/MMM/yyyy")</button>
<div class="content">
    <button type="button" class="collapsible">Tasks Assigned</button>
    <div class="content">
        @if (Model.tlist.Count != 0 && Model.tlist[0].DOT == DateTime.Today.AddDays(-1))
        {
            foreach (var i in Model.tlist)
            {
            
                <div class="col-lg-4 col-md-4 col-sm-4 bootstrap-touchspin-down bootstrap-select">
                    <button type="button" class="collapsible ">@(i.UserId == null && i.DOT == DateTime.Today.AddDays(-1) ? "" : i.DOT == DateTime.Today.AddDays(-1) ? i.UserId : "")</button>
                    <div class="content advance-table-row table-bordered" style="border-color:blue">
                        @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                        <fieldset>
                            <legend>@(i.Screen == null ? "" : i.DOT == DateTime.Today.AddDays(-1) ? i.Screen : "")</legend>
                            <h3>@(i.Description == null ? "" : i.DOT == DateTime.Today.AddDays(-1) ? i.Description : "")</h3>
                        </fieldset>
                    </div>
                </div>
            }
        }
        else if (Model.tlist.Count == 0)
        {
                <p style="color:red">No Task Assigned</p>
        }
        else
        {
                    <p style="color:red">No Task Assigned</p>
        }
        
    </div>
    
    <button type="button" class="collapsible">Task Done</button>
    <div class="col-lg-12 col-md-12 col-sm-12 bootstrap-touchspin-down">
    @if (Model.tdlist.Count != 0 && Model.tdlist[0].DOTD == DateTime.Today.AddDays(-1))
    {
        foreach (var i in Model.tdlist)
        {

            <div class="container-fluid advance-table-row table-bordered bootstrap-touchspin-up" style="border-color:green">
               <fieldset>
                    <legend>@(i.Screen == null ? "" : i.DOTD == DateTime.Today.AddDays(-1) ? i.Screen : "")</legend>
                    <h3>@(i.Description == null ? "" : i.DOTD == DateTime.Today.AddDays(-1) ? i.Description : "")</h3>
                </fieldset>
            </div>

        }
    }
    else if (Model.tdlist.Count == 0)
    {
                     <p style="color:red">No Task Done</p>
    }

    else
    {
                    <p style="color:red">No Task Done</p>
    }

        @*<lebel style="color:red">New Task Done</lebel>*@

        @*<div class="container-fluid advance-table-row table-bordered bootstrap-touchspin-up" style="border-color:green" id="tddata_div">qua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
            @*<fieldset>
                <legend class="col-lg-6 col-md-6 col-sm-6 bootstrap-touchspin-down">Project Name @Html.DropDownListFor(m => m.ProjectId, new SelectList(ViewBag.pr_data, "Value", "Text"), "---select---", new { @class = "form-control" })*@
               @*@Html.TextAreaFor(m => m.Description, new { @class = "form-control", placeholder = "Description"})
                        @Html.TextBoxFor(m => m.Screen, new { @class = "form-control", placeholder = "Screen Name" })*@
                    @*<button class="btn btn-success" type="submit" id="submit">Submit </button>
                </legend>
            </fieldset>
        </div>*@
    </div>
   
    <button type="button" class="collapsible">Final Comment</button>
    <div class="content">
@if (Model.fclist.Count != 0 && Model.fclist[0].DOFC == DateTime.Today.AddDays(-1))
{
        @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
    foreach (var i in Model.fclist)
    {

            <div class="col-lg-4 col-md-4 col-sm-4 bootstrap-touchspin-down bootstrap-select">
                <button type="button" class="collapsible ">@(i.AdminUserId == null ? "" : i.DOFC == DateTime.Today.AddDays(-1) ? i.AdminUserId : "")</button>
                <div class="content advance-table-row table-bordered" style="border-color:blue">
                    @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                    <fieldset>
                        <legend>@(i.Screen == null ? "" : i.DOFC == DateTime.Today.AddDays(-1) ? i.Screen : "")</legend>
                        <h3>@(i.Description == null ? "" : i.DOFC == DateTime.Today.AddDays(-1) ? i.Description : "")</h3>
                    </fieldset>
                </div>
            </div>
    }
}
else if (Model.fclist.Count == 0)
{
            <p style="color:red">No Final Comment Found</p>
}
else
{
            <p style="color:red">No Final Comment Found</p>
}
    </div>
</div>


<button type="button" class="collapsible">@DateTime.Now.DayOfWeek,@DateTime.Now.ToString("dd/MMM/yyyy")</button>
<div class="content">
    <button type="button" class="collapsible">Tasks Assigned</button>
    <div class="content">
        @if (Model.tlist.Count != 0 && Model.tlist[0].DOT == DateTime.Today.AddDays(-0))
        {
            foreach (var i in Model.tlist)
            {
            
                <div class="col-lg-4 col-md-4 col-sm-4 bootstrap-touchspin-down bootstrap-select">
                    <button type="button" class="collapsible ">@(i.UserId == null ? "" : i.DOT == DateTime.Today ? i.UserId : "")</button>
                    <div class="content advance-table-row table-bordered" style="border-color:blue">
                        @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                        <fieldset>
                            <legend>@(i.Screen == null ? "" : i.DOT == DateTime.Today ? i.Screen : "")</legend>
                            <h3>@(i.Description == null ? "" : i.DOT == DateTime.Today ? i.Description : "")</h3>
                        </fieldset>
                    </div>
                </div>
            }
        }
        else if (Model.tlist.Count == 0)
        {
            <p style="color:red">No Task Assigned</p>
        }
        else
        {
            <p style="color:red">No Task Assigned</p>
        }
        
    </div>
    
    <button type="button" class="collapsible">Task Done</button>
    <div class="col-lg-12 col-md-12 col-sm-12 bootstrap-touchspin-down">
@if (Model.tdlist.Count != 0 && Model.tdlist[0].DOTD == DateTime.Today.AddDays(-0))
{
    foreach (var i in Model.tdlist)
    {
             <div class="container-fluid advance-table-row table-bordered bootstrap-touchspin-up" style="border-color:green">
                <fieldset>
                    <legend>@(i.Screen == null ? "" : i.DOTD == DateTime.Today ? i.Screen : "")</legend>
                    <h3>@(i.Description == null ? "" : i.DOTD == DateTime.Today ? i.Description : "")</h3>
                </fieldset>
            </div>

    }
}
else if (Model.tdlist.Count == 0)
{
            <p style="color:red">No Task Done</p>
}
else
{
            <p style="color:red">No Task Done</p>
}

        <lebel style="color:red">New Task Done</lebel>

        <div class="container-fluid advance-table-row table-bordered bootstrap-touchspin-up" style="border-color:green" id="tddata_div">
            @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
            <fieldset>
                <legend class="col-lg-6 col-md-6 col-sm-6 bootstrap-touchspin-down">Project Name @Html.DropDownListFor(m => m.ProjectId, new SelectList(ViewBag.pr_data, "Value", "Text"), "---select---", new { @class = "form-control" })
               @Html.TextAreaFor(m => m.Description, new { @class = "form-control", placeholder = "Description" })
                        @Html.TextBoxFor(m => m.Screen, new { @class = "form-control", placeholder = "Screen Name" })
                    <label for="image">Image</label>
                    <input type="file" class="form-control-file" id="image" name="BaseImg" />
                    <button class="btn btn-success" type="submit" id="submit">Submit </button>
                </legend>
            </fieldset>
        </div>
    </div>
    <button type="button" class="collapsible">Final Comment</button>
    <div class="content">
        @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
        @if (Model.fclist.Count != 0 && Model.fclist[0].DOFC == DateTime.Today.AddDays(-0))
        {
            foreach (var i in Model.fclist)
            {
             <div class="col-lg-4 col-md-4 col-sm-4 bootstrap-touchspin-down bootstrap-select">
                <button type="button" class="collapsible ">@(i.AdminUserId == null ? "" : i.DOFC == DateTime.Today ? i.AdminUserId : "")</button>
                <div class="content advance-table-row table-bordered" style="border-color:blue">
                    @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                    <fieldset>
                        <legend>@(i.Screen == null ? "" : i.DOFC == DateTime.Today ? i.Screen : "")</legend>
                        <h3>@(i.Description == null ? "" : i.DOFC == DateTime.Today ? i.Description : "")</h3>
                    </fieldset>
                </div>
            </div>
            }
        }
        else if (Model.fclist.Count == 0)
        {
            <p style="color:red">No Task Done</p>
        }
        else
        {
            <p style="color:red">No Task Done</p>
        }
    </div>
</div>

}

@Html.ValidationSummary()
@Html.Raw(TempData["Message"])
<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        });
    }
    function fxsave_tskdn_data(ProjectId, Description, Screen) {
        if (ProjectId!=""|| null)
        {
            //alert("jjj")
            var getData = { id: ProjectId, Des: Description,Screen:Screen };
           $.ajax({
                type: "POST",
                url: '@Url.Action("Insertd_data", "MyIssues")',
                data2: getData,
                dataType: "json",
                success: function (data2) {
                    alert("jjj")
                    if (data2.status == "success") {
                        $("#success").html("<div class='alert alert-success alert-dismissable'><i class='fa fa-info-circle fa-fw'></i><button class='close' aria-hidden='true' data-dismiss='alert' type='button'>×</button>" + data2.message + "</div>");
                        $("#Loder").modal('hide');
                    }

                    else {
                        $("#warning").html("<div class='alert alert-danger alert-dismissable'><i class='fa fa-info-circle fa-fw'></i><button class='close' aria-hidden='true' data-dismiss='alert' type='button'>×</button>" + data2.message + "</div>");
                        $("#Loder").modal('hide');
                    }
                }


            });
        }
    }
</script>

